# Docker dev profile: run with Docker + Celery/Redis using development settings.
APP_ENV=development
LOG_LEVEL=INFO

# Secrets (fill locally)
IMAGE_PROVIDER=nano_banana
GEMINI_API_KEY=YOUR_GEMINI_API_KEY
GEMINI_MODEL=gemini-3-pro-image-preview

# Database (docker)
DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/DBNAME
APP_SECRET_KEY=CHANGE_ME

# AI behavior
FAST_MODE=false
GEMINI_MODEL=gemini-3-pro-image-preview
GEMINI_MODEL_FAST=gemini-2.5-flash-image
GEMINI_TIMEOUT_SECONDS=60
GEMINI_MAX_RETRIES=2
GEMINI_BACKOFF_BASE_SECONDS=1
GEMINI_BACKOFF_MAX_SECONDS=8
GEMINI_CB_THRESHOLD=5
GEMINI_CB_COOLDOWN_SECONDS=60
FAST_REFERENCE_MAX_SIZE=256

# Background removal (full model by default; lite in fast mode)
BACKGROUND_REMOVAL_MODEL=birefnet-general
BACKGROUND_REMOVAL_MODEL_FAST=birefnet-general-lite
BACKGROUND_REMOVAL_FAST_ALPHA_MATTING=false
BACKGROUND_REMOVAL_FAST_POST_PROCESS=false
BACKGROUND_REMOVAL_LAZY_INIT=true

# Async jobs (enabled in docker dev)
ASYNC_TASKS_ENABLED=true
CELERY_BROKER_URL=redis://HOST:6379/0
CELERY_RESULT_BACKEND=redis://HOST:6379/0
CELERY_RESULT_EXPIRES=86400
CELERY_QUEUE_GENERATION=ivg_generate
CELERY_QUEUE_BG_REMOVE=ivg_bg
CELERY_WORKER_POOL=prefork
CELERY_WORKER_AUTOSCALE_MIN=2
CELERY_WORKER_AUTOSCALE_MAX=8

# Migrations (auto for dev)
AUTO_MIGRATE=true

# Limits
MAX_CONTENT_LENGTH_MB=10
STYLE_RULES_MAX_CHARS=4000

# Caddy (not used in dev unless profile enabled)
CADDY_DOMAIN=example.com
CADDY_EMAIL=admin@example.com
CADDY_MAX_BODY=10MB
